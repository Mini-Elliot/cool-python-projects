<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Mini Game — EAH</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <style>
            #target {
                width: 100px;
                height: 100px;
                background: #0d6efd;
                border-radius: 12px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        {% include 'index.html' %}
        <main class="container mt-4 text-center">
            <h2>Click the target</h2>
            <p>Click as many times as you can in 10 seconds.</p>
            <div
                id="game-area"
                class="d-flex justify-content-center align-items-center"
                style="height: 220px"
            >
                <div id="target" class="m-3"></div>
            </div>
            <div class="mt-3">
                <button id="start" class="btn btn-success">Start</button>
                <button id="reset" class="btn btn-secondary">Reset</button>
            </div>
            <p class="mt-3">
                Time: <span id="time">10</span>s — Score:
                <span id="score">0</span>
            </p>
        </main>

        <script>
            let timeLeft = 10;
            let score = 0;
            let timer = null;
            const target = document.getElementById("target");
            const timeEl = document.getElementById("time");
            const scoreEl = document.getElementById("score");
            const startBtn = document.getElementById("start");
            const resetBtn = document.getElementById("reset");

            function moveTarget() {
                const area = document
                    .getElementById("game-area")
                    .getBoundingClientRect();
                const maxX = area.width - 100,
                    maxY = area.height - 100;
                target.style.transform = `translate(${
                    Math.random() * maxX
                }px, ${Math.random() * maxY}px)`;
            }

            target.addEventListener("click", () => {
                if (timeLeft <= 0) return;
                score++;
                scoreEl.textContent = score;
                moveTarget();
            });

            startBtn.addEventListener("click", () => {
                if (timer) return;
                timeLeft = 10;
                score = 0;
                timeEl.textContent = timeLeft;
                scoreEl.textContent = score;
                timer = setInterval(() => {
                    timeLeft--;
                    timeEl.textContent = timeLeft;
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        timer = null;
                        alert("Time up! Score: " + score);
                    }
                }, 1000);
                moveTarget();
            });

            resetBtn.addEventListener("click", () => {
                clearInterval(timer);
                timer = null;
                timeLeft = 10;
                score = 0;
                timeEl.textContent = timeLeft;
                scoreEl.textContent = score;
                target.style.transform = "translate(0,0)";
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
